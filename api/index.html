<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta
      name="keywords"
      content="microfrontend, micro frontend, micro frontends, micro-frontend, micro-frontends, microservice, javascript"
    />
    <style>
      .__dumi-default-navbar-logo {
        padding-left: 0 !important;
      }
    </style>
    <link rel="stylesheet" href="./umi.css" />
    <script>
      window.routerBase = location.pathname
        .split("/")
        .slice(0, -1)
        .concat("")
        .join("/");
    </script>
    <script>
      //! umi version: 3.2.2
    </script>
    <script>
      var _hmt = _hmt || [];
    </script>
    <script>
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?0f738d9b0ac90574c09183ea85bcfa2e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <title>API</title>
  <script>
      window.g_useSSR = true;
      window.g_initialProps = {};

    </script>
    </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="false" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" href="/qiankun//">qiankun</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/qiankun//guide">Guide</a><a aria-current="page" class="active" href="/qiankun//api">API</a><a href="/qiankun//faq">FAQ</a><a target="_blank" href="https://github.com/umijs/qiankun/releases">Changelog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" href="https://v1.qiankun.umijs.org/">1.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" href="https://github.com/umijs/qiankun">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="__dumi-default-locale-select" data-locale-count="2"><span>ä¸­æ–‡</span></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" href="/qiankun//"></a><h1>qiankun</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/qiankun//guide">Guide</a></li><li><a aria-current="page" class="active" href="/qiankun//api">API</a></li><li><a href="/qiankun//faq">FAQ</a></li><li><a target="_blank" href="https://github.com/umijs/qiankun/releases">Changelog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" href="https://v1.qiankun.umijs.org/">1.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" href="https://github.com/umijs/qiankun">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><span>ä¸­æ–‡</span></div></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/qiankun//api">API</a><ul role="slug-list"><li title="Route based configuration" data-depth="2" class=""><a href="/qiankun//api#route-based-configuration"><span>Route based configuration</span></a></li><li title="registerMicroApps(apps, lifeCycles?)" data-depth="3" class=""><a href="/qiankun//api#registermicroappsapps-lifecycles"><span>registerMicroApps(apps, lifeCycles?)</span></a></li><li title="start(opts?)" data-depth="3" class=""><a href="/qiankun//api#startopts"><span>start(opts?)</span></a></li><li title="setDefaultMountApp(appLink)" data-depth="3" class=""><a href="/qiankun//api#setdefaultmountappapplink"><span>setDefaultMountApp(appLink)</span></a></li><li title="runAfterFirstMounted(effect)" data-depth="3" class=""><a href="/qiankun//api#runafterfirstmountedeffect"><span>runAfterFirstMounted(effect)</span></a></li><li title="Manually load micro applications" data-depth="2" class=""><a href="/qiankun//api#manually-load-micro-applications"><span>Manually load micro applications</span></a></li><li title="loadMicroApp(app, configuration?)" data-depth="3" class=""><a href="/qiankun//api#loadmicroappapp-configuration"><span>loadMicroApp(app, configuration?)</span></a></li><li title="prefetchApps(apps, importEntryOpts?)" data-depth="3" class=""><a href="/qiankun//api#prefetchappsapps-importentryopts"><span>prefetchApps(apps, importEntryOpts?)</span></a></li><li title="addErrorHandler/removeErrorHandler" data-depth="2" class=""><a href="/qiankun//api#adderrorhandlerremoveerrorhandler"><span>addErrorHandler/removeErrorHandler</span></a></li><li title="addGlobalUncaughtErrorHandler(handler)" data-depth="2" class=""><a href="/qiankun//api#addglobaluncaughterrorhandlerhandler"><span>addGlobalUncaughtErrorHandler(handler)</span></a></li><li title="removeGlobalUncaughtErrorHandler(handler)" data-depth="2" class=""><a href="/qiankun//api#removeglobaluncaughterrorhandlerhandler"><span>removeGlobalUncaughtErrorHandler(handler)</span></a></li><li title="initGloabalState(state)" data-depth="2" class=""><a href="/qiankun//api#initgloabalstatestate"><span>initGloabalState(state)</span></a></li></ul></li></ul></div></div><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="api"><a aria-hidden="true" href="#api"><span class="icon icon-link"></span></a>API</h1><h2 id="route-based-configuration"><a aria-hidden="true" href="#route-based-configuration"><span class="icon icon-link"></span></a>Route based configuration</h2><p>Suitable for route-based scenarios.</p><p>By linking the micro-application to some url rules, the function of automatically loading the corresponding micro-application when the browser url changes.</p><h3 id="registermicroappsapps-lifecycles"><a aria-hidden="true" href="#registermicroappsapps-lifecycles"><span class="icon icon-link"></span></a><code>registerMicroApps(apps, lifeCycles?)</code></h3><ul><li><p>Parameters</p><ul><li>apps - <code>Array&lt;RegistrableApp&gt;</code> - required, registration information for the child application</li><li>lifeCycles - <code>LifeCycles</code> - optional, global sub app lifecycle hooks</li></ul></li><li><p>Type</p><ul><li><p><code>RegistrableApp</code></p><ul><li><p>name - <code>string</code> - required, the name of the child application and must be unique between the child applications.</p></li><li><p>entry - <code>string | <!-- -->{<!-- --> scripts?: string[]; styles?: string[]; html?: string <!-- -->}</code> - required, The entry url of the child application.</p></li><li><p>container - <code>string | HTMLElement</code> - requiredï¼ŒA selector or Element instance of the container node of a micro application. Such as <code>container: &#x27;#root&#x27;</code> or <code>container: document.querySelector(&#x27;#root&#x27;)</code>.</p></li><li><p>activeRule -  - <code>string | (location: Location) =&gt; boolean | Array&lt;string | (location: Location) =&gt; boolean&gt; </code> - required,activation rules for micro-apps.</p><ul><li>Support direct configuration of string or string array, such as <code>activeRule: &#x27;/app1&#x27;</code> or <code>activeRule: [&#x27;/app1&#x27;, &#x27;/app2&#x27;]</code>, when configured as a string, it will directly follow the path part in the url Do a prefix match. A successful match indicates that the current application will be activated.</li><li>Support to configure an active function or a group of active functions. The function will pass in the current location as a parameter. When the function returns true, it indicates that the current micro application will be activated. Such as <code>location =&gt; location.pathname.startsWith (&#x27;/app1&#x27;)</code>.</li></ul><p>Example rules:</p><p><code>&#x27;/app1&#x27;</code></p><ul><li><p>âœ… <a href="https://app.com/app1" target="_blank">https://app.com/app1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p>âœ… <a href="https://app.com/app1/anything/everything" target="_blank">https://app.com/app1/anything/everything<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li><li><p>ðŸš« <a href="https://app.com/app2" target="_blank">https://app.com/app2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul><p><code>&#x27;/users/:userId/profile&#x27;</code></p><ul><li>âœ… <a href="https://app.com/users/123/profile" target="_blank">https://app.com/users/123/profile<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>âœ… <a href="https://app.com/users/123/profile/sub-profile/" target="_blank">https://app.com/users/123/profile/sub-profile/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>ðŸš« <a href="https://app.com/users//profile/sub-profile/" target="_blank">https://app.com/users//profile/sub-profile/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>ðŸš« <a href="https://app.com/users/profile/sub-profile/" target="_blank">https://app.com/users/profile/sub-profile/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p><code>&#x27;/pathname/#/hash&#x27;</code></p><ul><li>âœ… <a href="https://app.com/pathname/#/hash" target="_blank">https://app.com/pathname/#/hash<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>âœ… <a href="https://app.com/pathname/#/hash/route/nested" target="_blank">https://app.com/pathname/#/hash/route/nested<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>ðŸš« <a href="https://app.com/pathname#/hash/route/nested" target="_blank">https://app.com/pathname#/hash/route/nested<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>ðŸš« <a href="https://app.com/pathname#/another-hash" target="_blank">https://app.com/pathname#/another-hash<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p><code>[&#x27;/pathname/#/hash&#x27;, &#x27;/app1&#x27;]</code></p><ul><li>âœ… <a href="https://app.com/pathname/#/hash/route/nested" target="_blank">https://app.com/pathname/#/hash/route/nested<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>âœ… <a href="https://app.com/app1/anything/everything" target="_blank">https://app.com/app1/anything/everything<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>ðŸš« <a href="https://app.com/pathname/app1" target="_blank">https://app.com/pathname/app1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>ðŸš« <a href="https://app.com/app2" target="_blank">https://app.com/app2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>This function is called when the browser url changes, and <code>activeRule</code> returns <code>true</code> to indicate that the subapplication needs to be activated.</p></li><li><p>loader - <code>(loading: boolean) =&gt; void</code> - optional, function will be invoked while the loading state changed.</p></li><li><p>props - <code>object</code> - optional, data that the primary application needs to pass to the child application.</p></li></ul></li><li><p><code>LifeCycles</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type Lifecycle = (app: RegistrableApp) =&gt; Promise&lt;any&gt;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name">Lifecycle</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token parameter punctuation">:</span><span class="token parameter"> RegistrableApp</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ul><li>beforeLoad - <code>Lifecycle | Array&lt;Lifecycle&gt;</code> - optional</li><li>beforeMount - <code>Lifecycle | Array&lt;Lifecycle&gt;</code> - optional</li><li>afterMount - <code>Lifecycle | Array&lt;Lifecycle&gt;</code> - optional</li><li>beforeUnmount - <code>Lifecycle | Array&lt;Lifecycle&gt;</code> - optional</li><li>afterUnmount - <code>Lifecycle | Array&lt;Lifecycle&gt;</code> - optional</li></ul></li></ul></li><li><p>Usage</p><p>Configuration information for registered subapplications in the main application.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-tsx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { registerMicroApps } from &#x27;qiankun&#x27;;

registerMicroApps(
  [
    {
      name: &#x27;app1&#x27;,
      entry: &#x27;//localhost:8080&#x27;,
      container: &#x27;#container&#x27;,
      activeRule: &#x27;/react&#x27;,
      props: {
        name: &#x27;kuitos&#x27;,
      }
    }
  ],
  {
    beforeLoad: app =&gt; console.log(&#x27;before load&#x27;, app.name),
    beforeMount: [
      app =&gt; console.log(&#x27;before mount&#x27;, app.name),
    ],
  },
);
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> registerMicroApps </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">registerMicroApps</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:8080&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      container</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;#container&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      activeRule</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/react&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      props</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;kuitos&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">beforeLoad</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token parameter">app</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;before load&#x27;</span><span class="token punctuation">,</span><span class="token plain"> app</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    beforeMount</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token parameter">app</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;before mount&#x27;</span><span class="token punctuation">,</span><span class="token plain"> app</span><span class="token punctuation">.</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h3 id="startopts"><a aria-hidden="true" href="#startopts"><span class="icon icon-link"></span></a><code>start(opts?)</code></h3><ul><li><p>Parameters</p><ul><li>opts - <code>Options</code> optional</li></ul></li><li><p>Type</p><ul><li><p><code>Options</code></p><ul><li><p>prefetch - <code>boolean | &#x27;all&#x27; | string[] | (( apps: RegistrableApp[] ) =&gt; <!-- -->{<!-- --> criticalAppNames: string[]; minorAppsName: string[] <!-- -->}<!-- -->)</code> - optional, whether to enable prefetch, default is <code>true</code>.</p><p>A configuration of <code>true</code> starts prefetching static resources for other subapplications after the first subapplication mount completes.</p><p>If configured as <code>&#x27;all&#x27;</code>, the main application <code>start</code> will begin to preload all subapplication static resources.</p><p>If configured as <code>string[]</code>, starts prefetching static resources for subapplications after the first subapplication mount completes which be declared in this list.</p><p>If configured as <code>function</code>, the timing of all subapplication static resources will be controlled by yourself.</p></li><li><p>sandbox - <code>boolean</code> | <code>{<!-- --> strictStyleIsolation?: boolean <!-- -->}</code> - optional, whether to open the js sandbox, default is <code>true</code>.</p><p>When configured as <code>{<!-- -->strictStyleIsolation: true<!-- -->}</code>, qiankun will convert the container dom of each application to a <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank">shadow dom<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, to ensure that the style of the application will not leak to the global.</p></li><li><p>singular - <code>boolean | ((app: RegistrableApp&lt;any&gt;) =&gt; Promise&lt;boolean&gt;);</code> - optionalï¼Œwhether is a singular modeï¼Œdefault is <code>true</code>.</p></li><li><p>fetch - <code>Function</code> - optional</p></li><li><p>getPublicPath - <code>(url: string) =&gt; string</code> - optional</p></li><li><p>getTemplate - <code>(tpl: string) =&gt; string</code> - optional</p></li></ul></li></ul></li><li><p>Usage</p><p>Start qiankun.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { start } from &#x27;qiankun&#x27;;

start();
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> start </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h3 id="setdefaultmountappapplink"><a aria-hidden="true" href="#setdefaultmountappapplink"><span class="icon icon-link"></span></a><code>setDefaultMountApp(appLink)</code></h3><ul><li><p>Parameters</p><ul><li>appLink - <code>string</code> - required</li></ul></li><li><p>Usage</p><p>Sets the child application that enters by default after the main application starts.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { setDefaultMountApp } from &#x27;qiankun&#x27;;

setDefaultMountApp(&#x27;/homeApp&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> setDefaultMountApp </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">setDefaultMountApp</span><span class="token punctuation">(</span><span class="token string">&#x27;/homeApp&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h3 id="runafterfirstmountedeffect"><a aria-hidden="true" href="#runafterfirstmountedeffect"><span class="icon icon-link"></span></a><code>runAfterFirstMounted(effect)</code></h3><ul><li><p>Parameters</p><ul><li>effect - <code>() =&gt; void</code> - required</li></ul></li><li><p>Usage</p><p>Methods that need to be called after the first subapplication mount, such as turning on some monitoring or buried scripts.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { runAfterFirstMounted } from &#x27;qiankun&#x27;;

runAfterFirstMounted(() =&gt; startMonitor());
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> runAfterFirstMounted </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">runAfterFirstMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token function">startMonitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h2 id="manually-load-micro-applications"><a aria-hidden="true" href="#manually-load-micro-applications"><span class="icon icon-link"></span></a>Manually load micro applications</h2><p>It is suitable for scenarios where a micro application needs to be manually loaded / unloaded.</p><div class="__dumi-default-alert" type="info">Usually in this scenario, the micro application is a business component that can run independently without routing. Micro applications should not be split too fine, it is recommended to split according to the business domain. Functional units with close business associations should be made into one micro-application, and conversely, those with less close association can be considered to be split into multiple micro-applications. A criterion for judging whether the business is closely related: <strong>Look at whether this micro application has frequent communication needs with other micro applications</strong>. If it is possible to show that these two micro-applications are serving the same business scenario, it may be more appropriate to merge them into one micro-application.</div><h3 id="loadmicroappapp-configuration"><a aria-hidden="true" href="#loadmicroappapp-configuration"><span class="icon icon-link"></span></a><code>loadMicroApp(app, configuration?)</code></h3><ul><li><p>Parameters</p><ul><li><p>app - <code>LoadableApp</code> - Required, basic information of micro application</p><ul><li>name - <code>string</code> - Required, the name of the micro application must be unique among the micro applications.</li><li>entry - <code>string | <!-- -->{<!-- --> scripts?: string[]; styles?: string[]; html?: string <!-- -->}</code> - Required, the entry address of the micro application.</li><li>container - <code>string | HTMLElement</code> - Required, selector or Element instance of the container node of the micro application. Such as <code>container: &#x27;#root&#x27;</code> or <code>container: document.querySelector(&#x27;#root&#x27;)</code>.</li><li>props - <code>object</code> - Optional, the data that needs to be passed to the micro-application during initialization.</li></ul></li><li><p>configuration - <code>Configuration</code> - Optional, configuration information of the micro application</p><ul><li><p>sandbox - <code>boolean</code> | <code>{<!-- --> strictStyleIsolation?: boolean <!-- -->}</code> - Optional, whether to enable the sandbox, the default is <code>true</code>.</p><p>When configured as <code>{<!-- -->strictStyleIsolation: true<!-- -->}</code>, it means that strict style isolation mode is enabled. In this mode, qiankun will wrap a <a href="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_shadow_DOM" target="_blank">shadow dom<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> node for each micro-application container, so as to ensure that the style of the micro application will not affect the whole world.</p></li><li><p>singular - <code>boolean | ((app: RegistrableApp&lt;any&gt;) =&gt; Promise&lt;boolean&gt;);</code> - Optional, whether it is a single instance scenario, the default is <code>false</code>.</p></li><li><p>fetch - <code>Function</code> - Optional, custom fetch method.</p></li><li><p>getPublicPath - <code>(url: string) =&gt; string</code> - Optional</p></li><li><p>getTemplate - <code>(tpl: string) =&gt; string</code> - Optional</p></li></ul></li></ul></li><li><p>è¿”å›žå€¼ - <code>MicroApp</code> - Micro application examples</p><ul><li>mount(): Promise&lt;null&gt;;</li><li>unmount(): Promise&lt;null&gt;;</li><li>update(customProps: object): Promise&lt;any&gt;;</li><li>getStatus(): | &quot;NOT_LOADED&quot; | &quot;LOADING_SOURCE_CODE&quot; | &quot;NOT_BOOTSTRAPPED&quot; | &quot;BOOTSTRAPPING&quot; | &quot;NOT_MOUNTED&quot; | &quot;MOUNTING&quot; | &quot;MOUNTED&quot; | &quot;UPDATING&quot; | &quot;UNMOUNTING&quot; | &quot;UNLOADING&quot; | &quot;SKIP_BECAUSE_BROKEN&quot; | &quot;LOAD_ERROR&quot;;</li><li>loadPromise: Promise&lt;null&gt;;</li><li>bootstrapPromise: Promise&lt;null&gt;;</li><li>mountPromise: Promise&lt;null&gt;;</li><li>unmountPromise: Promise&lt;null&gt;;</li></ul></li><li><p>Usage</p><p>Load a micro application manually.</p><p>If you need to support the main application to manually update the micro application, you need to export an update hook for the micro application entry:</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="export function mount(props) {
  renderApp(props);
}

// Added update hook to allow the main application to manually update the micro application
export function update(props) {
  renderPatch(props);
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">renderApp</span><span class="token punctuation">(</span><span class="token plain">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Added update hook to allow the main application to manually update the micro application</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">renderPatch</span><span class="token punctuation">(</span><span class="token plain">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-jsx"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { loadMicroApp } from &#x27;qiankun&#x27;;
import React from &#x27;react&#x27;;

class App extends React.Component {
  
  containerRef = React.createRef();
  microApp = null;
  
  componentDidMount() {
    this.microApp = loadMicroApp(
      { name: &#x27;app1&#x27;, entry: &#x27;//localhost:1234&#x27;, container: this.containerRef.current, props: { name: &#x27;qiankun&#x27; } },
    );
  }

  componentWillUnmount() {
    this.microApp.unmount();
  }

  componentDidUpdate() {
    this.microApp.update({ name: &#x27;kuitos&#x27; });
  }
  
  render() {
    return &lt;div ref={this.containerRef}&gt;&lt;/div&gt;;
  }
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> loadMicroApp </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> React </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">App</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">React</span><span class="token class-name punctuation">.</span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span></div><div class="token-line"><span class="token plain">  containerRef </span><span class="token operator">=</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  microApp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span></div><div class="token-line"><span class="token plain">  </span><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token plain">microApp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">loadMicroApp</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:1234&#x27;</span><span class="token punctuation">,</span><span class="token plain"> container</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token plain">containerRef</span><span class="token punctuation">.</span><span class="token plain">current</span><span class="token punctuation">,</span><span class="token plain"> props</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token plain">microApp</span><span class="token punctuation">.</span><span class="token function">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token plain">microApp</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;kuitos&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">ref</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript keyword">this</span><span class="token tag script language-javascript punctuation">.</span><span class="token tag script language-javascript">containerRef</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h3 id="prefetchappsapps-importentryopts"><a aria-hidden="true" href="#prefetchappsapps-importentryopts"><span class="icon icon-link"></span></a><code>prefetchApps(apps, importEntryOpts?)</code></h3><ul><li><p>Parameters</p><ul><li>apps - <code>AppMetadata[]</code> - Required - list of preloaded apps</li><li>importEntryOpts - Optional - Load configuration</li></ul></li><li><p>Type</p><ul><li><code>AppMetadata</code><ul><li>name - <code>string</code> - Required - Application name</li><li>entry - <code>string | <!-- -->{<!-- --> scripts?: string[]; styles?: string[]; html?: string <!-- -->}</code> - Required,The entry address of the microapp</li></ul></li></ul></li><li><p>Usage</p><p>Manually preload the specified micro application static resources. Only needed to manually load micro-application scenarios, you can directly configure the <code>prefetch</code> attribute based on the route automatic activation scenario.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { prefetchApps } from &#x27;qiankun&#x27;;

prefetchApps([ { name: &#x27;app1&#x27;, entry: &#x27;//locahost:7001&#x27; }, { name: &#x27;app2&#x27;, entry: &#x27;//locahost:7002&#x27; } ])
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> prefetchApps </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">prefetchApps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//locahost:7001&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;app2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//locahost:7002&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h2 id="adderrorhandlerremoveerrorhandler"><a aria-hidden="true" href="#adderrorhandlerremoveerrorhandler"><span class="icon icon-link"></span></a><a href="https://single-spa.js.org/docs/api#adderrorhandler" target="_blank">addErrorHandler/removeErrorHandler<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2><h2 id="addglobaluncaughterrorhandlerhandler"><a aria-hidden="true" href="#addglobaluncaughterrorhandlerhandler"><span class="icon icon-link"></span></a><code>addGlobalUncaughtErrorHandler(handler)</code></h2><ul><li><p>Parameters</p><ul><li>handler - <code>(...args: any[]) =&gt; void</code> - Required</li></ul></li><li><p>Usage</p><p>Add the global uncaught error hander.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { addGlobalUncaughtErrorHandler } from &#x27;qiankun&#x27;;

addGlobalUncaughtErrorHandler(event =&gt; console.log(event));
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> addGlobalUncaughtErrorHandler </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">addGlobalUncaughtErrorHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h2 id="removeglobaluncaughterrorhandlerhandler"><a aria-hidden="true" href="#removeglobaluncaughterrorhandlerhandler"><span class="icon icon-link"></span></a><code>removeGlobalUncaughtErrorHandler(handler)</code></h2><ul><li><p>Parameters</p><ul><li>handler - <code>(...args: any[]) =&gt; void</code> - Required</li></ul></li><li><p>Usage</p><p>Remove the global uncaught error hander.</p></li><li><p>Sample</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { removeGlobalUncaughtErrorHandler } from &#x27;qiankun&#x27;;

removeGlobalUncaughtErrorHandler(handler);
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> removeGlobalUncaughtErrorHandler </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">removeGlobalUncaughtErrorHandler</span><span class="token punctuation">(</span><span class="token plain">handler</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul><h2 id="initgloabalstatestate"><a aria-hidden="true" href="#initgloabalstatestate"><span class="icon icon-link"></span></a><code>initGloabalState(state)</code></h2><ul><li><p>Parameters</p><ul><li>state - <code>Record&lt;string, any&gt;</code> - Required</li></ul></li><li><p>Usage</p><p>init global state, and return actions for communication. It is recommended to use in master, and slave get actions through propsã€‚</p></li><li><p>Return</p><ul><li><p>MicroAppStateActions</p><ul><li><p>onGlobalStateChange: <code>(callback: OnGlobalStateChangeCallback, fireImmediately?: boolean) =&gt; void</code> - Listen the global status in the current application: when state changes will trigger callback; fireImmediately = true, will trigger callback immediately when use this method.</p></li><li><p>setGlobalState: <code>(state: Record&lt;string, any&gt;) =&gt; boolean</code> - Set global state by first layer props, it can just modify first layer props what has defined.</p></li><li><p>offGlobalStateChange: <code>() =&gt; boolean</code> - Remove Listener in this app, will default trigger when app unmount.</p></li></ul></li></ul></li><li><p>Sample</p><p>Master:</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import { initGloabalState, MicroAppStateActions } from &#x27;qiankun&#x27;;

// Initialize state
const actions: MicroAppStateActions = initGloabalState(state);

actions.onGlobalStateChange((state, prev) =&gt; {
  // state: new state; prev old state
  console.log(state, prev);
});
actions.setGlobalState(state);
actions.offGlobalStateChange();
" data-status="copy"></button><div class="token-line"><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> initGloabalState</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">MicroAppStateActions</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;qiankun&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Initialize state</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> actions</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">MicroAppStateActions</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">initGloabalState</span><span class="token punctuation">(</span><span class="token plain">state</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">actions</span><span class="token punctuation">.</span><span class="token method function property-access">onGlobalStateChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token parameter punctuation">,</span><span class="token parameter"> prev</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// state: new state; prev old state</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">state</span><span class="token punctuation">,</span><span class="token plain"> prev</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">actions</span><span class="token punctuation">.</span><span class="token method function property-access">setGlobalState</span><span class="token punctuation">(</span><span class="token plain">state</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">actions</span><span class="token punctuation">.</span><span class="token method function property-access">offGlobalStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>Slave:</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// get actions from mount
export function mount(props) {

  props.onGlobalStateChange((state, prev) =&gt; {
    // state: new state; prev old state
    console.log(state, prev);
  });
  props.setGlobalState(state);

  // It will trigger when slave umount,  not necessary to use in non special cases.
  props.offGlobalStateChange();
  
  // ...
}
" data-status="copy"></button><div class="token-line"><span class="token comment">// get actions from mount</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  props</span><span class="token punctuation">.</span><span class="token method function property-access">onGlobalStateChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token parameter punctuation">,</span><span class="token parameter"> prev</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// state: new state; prev old state</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">state</span><span class="token punctuation">,</span><span class="token plain"> prev</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  props</span><span class="token punctuation">.</span><span class="token method function property-access">setGlobalState</span><span class="token punctuation">(</span><span class="token plain">state</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// It will trigger when slave umount,  not necessary to use in non special cases.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  props</span><span class="token punctuation">.</span><span class="token method function property-access">offGlobalStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" href="https://github.com/kuitos/qiankun/edit/master/docs/api/README.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">5/22/2020, 3:44:51 AM</span></div></div></div></div>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-157295698-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="./umi.js"></script>
  </body>
</html>
